1.
当一个分组到达后，路由器首先提取出分组中包含的目的IP地址，并计算出IP地址中的目的网络地址，接下来在路由表中查找与目的网络地址匹配的路由，如果匹配成功，就将该分组转发到下一跳地址所示的路由器。
下面给出具体的IP分组转发算法：


从数据报的首部提取出目的主机的IP地址D，并计算出目的网络地址N；

若N就是与此路由器直接相连的某个网络，则进行直接交付，不再经过其他的路由器直接把数据报交付目的主机（这里涉及到地址解析协议，不再详述）；否则就是间接交付，执行（3）；

若路由表中有目的地址为D的特定主机路由，则把数据报传送给该路由指明的下一跳地址；否则，执行（4）；

若路由表中有目的网络地址为N的路由，则把数据报传送给该路由指明的下一跳地址；否则，执行（5）；

若路由表中有一个默认路由，则把数据报该默认路由指明的下一跳地址；否则，报告转发分组出错。
other
当有数据包传到路由器时，路由器首先将其的目的地址与路由表进行对比，如果是本地网络，将不会进行转发到外网络，而是直接转发给本地网内的目的主机，改变的只是数据包的源地址,（原源地址MAC变为了路由器的MAC）；但是如果目的地址经路由表对比，发现不是在本网中，将改变源地址的IP（原源地址的Ip地址改为了路由器的IP地址），路由器将熟数据包转发到相应的端口，进行通信。